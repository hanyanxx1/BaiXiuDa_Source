根据你的情况，以下是针对 **Windows客户端 + Linux服务器MySQL连接失败（2002-10061错误）** 的详细排查步骤：

---

### **1. 确认服务器MySQL服务已启动**
  - **登录Linux服务器**，检查MySQL是否运行：
    ```bash
    systemctl status mysql      # Ubuntu/CentOS 7+
    # 或
    service mysql status        # 旧版系统
    ```
  - 如果未运行，启动服务：
    ```bash
    systemctl start mysql
    ```

---

### **2. 检查MySQL是否允许远程连接**
  - **修改MySQL配置文件**：
    - 打开配置文件（路径根据系统不同）：
      ```bash
      # Ubuntu/Debian
      sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
      # CentOS/RedHat
      sudo nano /etc/my.cnf
      ```
    - 找到 `bind-address` 行，修改为：
      ```ini
      bind-address = 0.0.0.0    # 允许所有IP访问
      ```
    - 保存后重启MySQL：
      ```bash
      systemctl restart mysql
      ```

---

### **3. 检查Linux服务器防火墙**
  - **开放3306端口**：
    - 如果使用 `ufw`（Ubuntu）：
      ```bash
      sudo ufw allow 3306/tcp
      sudo ufw reload
      ```
    - 如果使用 `firewalld`（CentOS）：
      ```bash
      sudo firewall-cmd --permanent --add-port=3306/tcp
      sudo firewall-cmd --reload
      ```
  - **临时关闭防火墙测试**（仅用于排查）：
    ```bash
    sudo systemctl stop firewalld   # CentOS
    sudo ufw disable               # Ubuntu
    ```

---

### **4. 检查云服务器安全组（如阿里云、腾讯云等）**
  - 登录云平台控制台，找到服务器的安全组规则。
  - 添加入站规则：**允许所有IP（0.0.0.0/0）访问3306端口**。
  - 保存后等待1-2分钟生效。

---

### **5. 创建或授权MySQL远程用户**
  - 登录MySQL命令行：
    ```bash
    mysql -u root -p
    ```

  - 查看用户及其允许连接的 Host
    ```sql
    SELECT User, Host FROM mysql.user;

    -- 查看具体用户的权限（替换为你的用户名）
    SHOW GRANTS FOR 'hanyan'@'%';
    ```
  - 执行以下SQL（替换`用户名`和`密码`）：
    ```sql
    -- 创建允许所有IP访问的用户
    CREATE USER 'hanyan'@'%' IDENTIFIED BY 'BAIXIUDA@@han138388';
    GRANT ALL PRIVILEGES ON *.* TO 'hanyan'@'%' WITH GRANT OPTION;
    FLUSH PRIVILEGES;
    ```
  - 如果已有用户，修改权限：
    ```sql
    UPDATE mysql.user SET Host='%' WHERE User='hanyan';
    FLUSH PRIVILEGES;
    ```

---

### **6. 在Windows客户端测试端口连通性**
  - 打开Windows的**命令提示符**，执行：
    ```cmd
    telnet 61.158.166.35 3306
    ```
  - **如果提示“无法打开连接”**：
    - 端口被防火墙/安全组拦截。
    - MySQL未监听3306端口。
  - **如果连接成功**：
    - 会显示空白屏幕（表示端口可达），问题可能出在Navicat配置或MySQL权限。

---

### **7. 检查Windows本地防火墙**
  - 临时关闭Windows Defender防火墙：
    - 进入“控制面板” → “系统和安全” → “Windows Defender防火墙” → “启用或关闭防火墙”。
    - 暂时关闭**公用网络**的防火墙。
  - 重新测试Navicat连接。

---

### **8. 检查Navicat连接配置**
  - **正确填写参数**：
    - 主机/IP地址：`61.158.166.35`
    - 端口：`3306`
    - 用户名：步骤5中授权的用户（如`root`或自定义用户）。
    - 密码：确保无误（区分大小写）。
  - **连接类型**：选择`MySQL`，而非`MariaDB`或其它。

---

### **9. 检查MySQL错误日志**
  - 查看MySQL日志定位具体错误：
    ```bash
    # Ubuntu/Debian
    sudo tail -f /var/log/mysql/error.log
    # CentOS/RedHat
    sudo tail -f /var/log/mysqld.log
    ```
  - 常见日志错误：
    - `Access denied for user` → 权限问题。
    - `Can't connect to MySQL server` → 网络或服务未启动。

---

### **10. 其他可能性**
  - **MySQL端口被占用**：
    ```bash
    netstat -tulnp | grep 3306   # 检查3306端口是否被MySQL监听
    ```
  - **skip-networking配置**：
    - 在MySQL配置文件中检查是否有 `skip-networking`，如果有则注释掉：
      ```ini
      # skip-networking
      ```
  - **服务器多网卡问题**：
    - 如果服务器有多个网卡，确保 `bind-address` 绑定到正确的公网网卡。

### 11. 检查目录权限
- 确保 `/export_dir` 目录及其所有父目录的权限为 `777`，递归设置：
  ```bash
  sudo chmod 777 /export_dir
  ```
- 检查文件是否存在：
  ```bash
  ls -l /export_dir
  ```
- 确保文件权限为 `777`：
  ```bash
  sudo chmod 777 /export_dir/your_file.sql
  ```
---

### **最终验证**
1. **服务状态** → 运行中。
2. **bind-address** → `0.0.0.0`。
3. **防火墙/安全组** → 开放3306端口。
4. **MySQL用户权限** → `'用户名'@'%'`。
5. **本地Telnet测试** → 连接成功。
6. **Navicat参数** → 正确填写。

按顺序完成上述步骤后，90%以上的2002-10061错误可解决。如果仍失败，请联系服务器管理员检查中间网络设备（如路由器、企业防火墙）。

